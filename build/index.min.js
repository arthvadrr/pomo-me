(function () {
    'use strict';

    var $timer = document.getElementById("timer");
    var $start = document.getElementById("start");
    document.getElementById("stop");
    var isRunning = false;
    var dateStarted;
    var delta;

    var countdown = function countdown() {};

    var startTime = 30;
    var remainingTime = 30;

    var adjustTime = function adjustTime(delta) {
      var res = startTime - delta;

      if (res === 0) {
        delta = 0;
      }

      return startTime - delta;
    };

    var onStart = function onStart() {
      if (!isRunning) {
        isRunning = true;
        $start.innerHTML = "Pause";
        dateStarted = Date.now();
        countdown = setInterval(function () {
          delta = Math.round((Date.now() - dateStarted) / 1000);
          remainingTime = adjustTime(delta);
          $timer.innerHTML = remainingTime.toString();

          if (remainingTime === 0) {
            clearInterval(countdown);
            return;
          }
        }, 100);
      } else {
        isRunning = false;
        $start.innerHTML = "Start";
        startTime = remainingTime;
        clearInterval(countdown);
      }
    };

    $start.addEventListener("click", onStart);

}());
